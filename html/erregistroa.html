<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<title>Social Drive</title>
		<meta http-equiv="content-type" content="text/html;charset=UTF-8" />
		<script type="text/javascript"></script>
		<style type="text/css">
			body {
				background-color: #3CBC8D;
			}
			h1 {
				text-align: center;
				color: black;
				font-family: Georgia, "Times New Roman", Times, serif;
				max-width: 500px;
				padding: 10px 20px;
				background: #f4f7f8;
				margin: 10px auto;
				padding: 20px;
				border-radius: 8px;
			}
			label{
				text-align: center;
				color: black;
				font-family: Georgia, "Times New Roman", Times, serif;
				display: block;
			}
			.form-style{
				max-width: 500px;
				padding: 10px 20px;
				background: #f4f7f8;
				margin: 10px auto;
				padding: 20px;
				border-radius: 8px;
				font-family: Georgia, "Times New Roman", Times, serif;
			}
			.form-style input[type="text"],
			.form-style input[type="password"]{
				font-family: Georgia, "Times New Roman", Times, serif;
				background: rgba(255,255,255,.1);
				border: none;
				border-radius: 4px;
				font-size: 16px;
				margin: 0;
				outline: 0;
				padding: 7px;
				width: 100%;
				box-sizing: border-box;
				box-sizing: border-box;
				box-sizing: border-box;
				background-color: #e8eeef;
				color:#8a97a0;
				box-shadow: 0 1px 0 rgba(0,0,0,0.03) inset;
				margin-bottom: 30px;
		   
			}
			.form-style input[type="text"]:focus
			.form-style input[type="password"]:focus{
				background: #d2d9dd;
			}
			.form-style input[type="submit"],
			.form-style input[type="button"]
			{
				position: relative;
				display: block;
				padding: 19px 39px 18px 39px;
				color: #FFF;
				margin: 0 auto;
				background: #1abc9c;
				font-size: 18px;
				text-align: center;
				font-style: normal;
				width: 100%;
				border: 1px solid #16a085;
				border-width: 1px 1px 3px;
				margin-bottom: 10px;
			}
			.form-style input[type="submit"]:hover,
			.form-style input[type="button"]:hover
			{
				background: #109177;
			}
		</style>
	</head>
	<body>
		<h1>ERREGISTRA ZAITEZ!!!</h1>
		<label>(*) derrigorrezkoak dira betetzea</label></br></br>
		<div class="form-style">
		<form action="irakurri_erab.php" id="formularioa" name="formularioa" onsubmit="return balidatu()" method="post">
			Izena(*):<input type="text" id="izena" name="izena" pattern="[A-Za-z]{1,15}" title="Izena a eta z artean" required></input></br>	
			Abizena(*):<input type="text" id="abizena" name="abizena" pattern="[A-Za-z]{1,20}" required></input></br>
			Korreoa(*):<input type="text" id="korreoa" name="korreoa" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$" oninput="konprobatuKorreoa(this.value)" title="Emailak honako formatua eduki behar du: emaila@emaila.emaila" required></input>
			<label id="korreoEgoera" style="color: red;"></label></br>
			Hiria:<input type="text" id="hiria" name="hiria"></input></br>
			Erabiltzaile izena(*):<input type="text" id="erab" name="erab" required></input></br>
			Pasahitza(*):<input type="password" id="pasahitza" name="pasahitza" required></input></br>
			Pasahitza errepikatu(*):<input type="password" id="pasahitza2" name="pasahitza2" required></input></br></br>
			<input type="submit" id="erregistratu" name="erregistratu" value="Erregistratu" ></input>
			<input type="button" id="itzuli" name="itzuli" value="Itzuli" onclick="javascript:window.location.href='login.html'"></input>	
		</form>
		</div>
		<script>
			xhro = new XMLHttpRequest();
			function balidatu(){
				var boolean=true;
				var pasahitza = document.getElementById('pasahitza').value;
				var pasahitza2 = document.getElementById('pasahitza2').value;
				if(pasahitza!=pasahitza2){
					boolean=false;
					alert('Errepikatutako pasahitza ez da berdina');
				}
				if(document.getElementById('korreoEgoera').innerText == "korreo hau jada erregistraturik dago")boolean=false;
				console.log(document.getElementById('korreoEgoera').innerText);
				console.log("korreo hau jada erregistraturik dago");
				return boolean;
			}
			
			
			xhro.onreadystatechange = function(){
				if(xhro.readyState == 4 && xhro.status==200){
					var emaitza = xhro.responseText;
					console.log(emaitza);
					if(emaitza =="ondo") document.getElementById("korreoEgoera").innerHTML="";
					else document.getElementById("korreoEgoera").innerHTML=emaitza;
				}
			}
			function konprobatuKorreoa(korreoa){
				xhro.open("POST", "konprobatuKorreoa.php", true);
				xhro.setRequestHeader("Content-type","application/x-www-form-urlencoded");
				xhro.send("korreoa="+korreoa);
			}

		</script>
	</body>
</html>
